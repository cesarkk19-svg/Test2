local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

local Config = {
    AutoFarm = false,
    SpeedHack = false,
    JumpPower = false,
    NoClip = false,
    WalkSpeed = 25,
    JumpHeight = 80
}

local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TitleLabel = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local ScrollFrame = Instance.new("ScrollingFrame")

local isMinimized = false
local originalSize = UDim2.new(0, 320, 0, 400)
local minimizedSize = UDim2.new(0, 200, 0, 40)

ScreenGui.Name = "BDGui"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
MainFrame.Size = originalSize
MainFrame.Active = true
MainFrame.Draggable = true

TitleLabel.Parent = MainFrame
TitleLabel.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
TitleLabel.Size = UDim2.new(0.8, 0, 0, 35)
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.Text = "BD Safe Script"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 14

MinimizeButton.Parent = MainFrame
MinimizeButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MinimizeButton.Position = UDim2.new(0.8, 0, 0, 0)
MinimizeButton.Size = UDim2.new(0.2, 0, 0, 35)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 16

ScrollFrame.Parent = MainFrame
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.Position = UDim2.new(0, 5, 0, 40)
ScrollFrame.Size = UDim2.new(1, -10, 1, -45)
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 600)

local function toggleMinimize()
    isMinimized = not isMinimized
    TweenService:Create(MainFrame, TweenInfo.new(0.3), {
        Size = isMinimized and minimizedSize or originalSize
    }):Play()
    ScrollFrame.Visible = not isMinimized
    MinimizeButton.Text = isMinimized and "+" or "_"
end

MinimizeButton.MouseButton1Click:Connect(toggleMinimize)

local function createButton(name, pos, callback)
    local btn = Instance.new("TextButton")
    btn.Parent = ScrollFrame
    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    btn.Position = pos
    btn.Size = UDim2.new(0, 300, 0, 30)
    btn.Font = Enum.Font.Gotham
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextSize = 12
    btn.MouseButton1Click:Connect(callback)
    return btn
end

local function createToggle(name, pos, key)
    local toggle = createButton(name .. ": OFF", pos, function()
        Config[key] = not Config[key]
        toggle.Text = name .. ": " .. (Config[key] and "ON" or "OFF")
        toggle.BackgroundColor3 = Config[key] and Color3.fromRGB(0, 120, 0) or Color3.fromRGB(120, 0, 0)
    end)
    toggle.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
    return toggle
end

local function autoPickup()
    spawn(function()
        while Config.AutoFarm do
            wait(math.random(1, 2))
            local char = player.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then continue end
            
            for _, item in pairs(workspace:GetChildren()) do
                if not Config.AutoFarm then break end
                
                local validItems = {"Arrow", "Rokakaka", "Ribcage", "Pelvis", "Left Arm", "Diary", "Bone"}
                local isValid = false
                
                for _, valid in pairs(validItems) do
                    if item.Name:lower():find(valid:lower()) then
                        isValid = true
                        break
                    end
                end
                
                if isValid and item:FindFirstChild("Handle") then
                    local dist = (char.HumanoidRootPart.Position - item.Handle.Position).Magnitude
                    if dist <= 50 then
                        local tween = TweenService:Create(char.HumanoidRootPart, 
                            TweenInfo.new(dist/30), {
                                CFrame = CFrame.new(item.Handle.Position + Vector3.new(0, 5, 0))
                            })
                        tween:Play()
                        tween.Completed:Wait()
                        wait(0.3)
                        
                        if item.Parent then
                            firetouchinterest(char.HumanoidRootPart, item.Handle, 0)
                            wait(0.1)
                            firetouchinterest(char.HumanoidRootPart, item.Handle, 1)
                        end
                        wait(math.random(1, 2))
                    end
                end
            end
        end
    end)
end

spawn(function()
    while true do
        wait()
        if Config.SpeedHack and player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = Config.WalkSpeed
        end
    end
end)

spawn(function()
    while true do
        wait()
        if Config.JumpPower and player.Character and player.Character:FindFirstChild("Humanoid") then
            local hum = player.Character.Humanoid
            if hum:FindFirstChild("JumpHeight") then
                hum.JumpHeight = Config.JumpHeight
            else
                hum.JumpPower = Config.JumpHeight
            end
        end
    end
end)

spawn(function()
    while true do
        wait()
        if Config.NoClip and player.Character then
            for _, part in pairs(player.Character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end
end)

local y = 0
local autoFarmToggle = createToggle("Safe Pickup", UDim2.new(0, 5, 0, y), "AutoFarm")
y = y + 35
local speedToggle = createToggle("Speed Hack", UDim2.new(0, 5, 0, y), "SpeedHack")
y = y + 35
local jumpToggle = createToggle("Jump Power", UDim2.new(0, 5, 0, y), "JumpPower")
y = y + 35
local noclipToggle = createToggle("NoClip", UDim2.new(0, 5, 0, y), "NoClip")
y = y + 35

local tps = {
    ["Spawn"] = CFrame.new(0, 5, 0),
    ["Shop"] = CFrame.new(100, 5, 100),
    ["Boss"] = CFrame.new(-200, 5, -200)
}

for name, pos in pairs(tps) do
    createButton("TP " .. name, UDim2.new(0, 5, 0, y), function()
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            player.Character.HumanoidRootPart.CFrame = pos
        end
    end)
    y = y + 35
end

createButton("Destroy GUI", UDim2.new(0, 5, 0, y), function()
    ScreenGui:Destroy()
end)

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.F then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

print("BD Safe Script Loaded! Press F to toggle")

